# 언어
- [English](README.md)
- [日本語](README_JPN.md)
- [简体中文](README_CHS.md)
- 한국어 (현재 문서)

# 목차
  - [개요](#개요)
  - [이용 약관](#이용-약관)
  - [기능](#기능)
  - [설치](#설치)
  - [사용 방법](#사용-방법)
  - [지원](#지원)
  - [관련 프로젝트](#관련-프로젝트)
  - [기여자](#기여자)

# 개요
`VVVF-Simulator` 는 PC에서 VVVF 인버터 소리를 재현하는 소프트웨어 입니다.<br>
본 프로그램은 C# WPF를 사용합니다.<br>

# 이용 약관
누구든지 이 프로그램의 코드를 비상업적 용도로 자유롭게 사용할 수 있습니다.
만약 이 프로그램을 사용하여 영상이나 수정된 프로그램을 만든다면 이 프로그램의 링크를 설명에 남겨주세요.
본 프로그램과 관련된 모든 것에 책임을 지지 않습니다.

# 기능
## VVVF 사운드 시뮬레이션
VVVF 사운드를 재현할 수 있습니다.<br>

## 주행음 시뮬레이션
모터와 감속기의 설정에 기반한 기차의 주행음을 재현할 수 있습니다.<br>
현재 이 기능은 개선중이며, 실제 주행음과 완전히 같지 않을 수 있습니다.<br>

## 실시간 오디오 생성
실시간으로 VVVF 오디오를 생성하고 제어 상태를 표시할 수 있습니다.<br>
`S`키로 가속하고 `W`키로 감속할 수 있습니다(기본 키 설정 기준).
![2024-11-04](https://github.com/user-attachments/assets/954d67ab-65c4-4298-9514-031b1221be6a)

## 실시간 파형 출력
USB 시리얼 포트를 통해 파형 데이터를 내보낼 수 있습니다.<br>

## 파일 내보내기
아래 유형들과 같이 `.wav` 오디오 파일, `.avi` 영상 파일, `.png` 이미지 파일을 내보낼 수 있습니다.<br>

|유형|파일|예시|
| --- | --- | --- |
|상/선간전압|`.wav`<br>`.avi`|예시 : `.avi`로 내보낸 선간전압 파형![2022-02-14](https://user-images.githubusercontent.com/77259842/153803020-6615bcce-22a6-4839-b919-ea114dc12d03.png)|
|주행음|`.wav`|
|전압 벡터|`.avi` <br> `.png`|
|제어 상태|`.avi` | 예시 : 제어 상태 디자인 2 ![2022-06-11 (1)](https://user-images.githubusercontent.com/77259842/173188884-72a1290a-6d7b-4354-88e4-cecfa5d0d424.png)|
|주파수 분포|`.avi` <br> `.png`|

# 설치
`exe` 파일을 다운로드 받아 실행하거나 PC에서 소스코드를 직접 빌드할 수 있습니다.
## exe로 실행하기
[릴리즈](https://github.com/VvvfGeeks/VVVF-Simulator/releases)에서 `VVVF-SIM.zip`을 다운로드 받은 후 압축을 풀고 `VVVF-Simulator.exe`를 실행합니다.<br>

## Visual Studio로 소스코드 빌드하기
먼저, Visual Studio 인스톨러를 다운로드 받습니다. 인스톨러를 실행하여 `.NET 데스크톱 개발`을 선택 후 설치합니다. 설치가 완료되면 Visual Studio를 실행하여 `리포지토리 복제`를 클릭합니다. 다음으로 아래의 URL을 복사합니다.
<br>
https://github.com/VvvfGeeks/VVVF-Simulator
<br>
복사한 URL을 `리포지토리 위치`에 붙여넣고 `복제`를 클릭합니다. `솔루션 'VvvfSimulator'`를 클릭하고 초록색 삼각형 실행 버튼을 눌러 프로그램을 컴파일 및 실행합니다. 그러면 빌드된 프로그램이 실행됩니다.
<br>

# 사용 방법
## 기본
이 프로그램을 사용하기 위해서는 SPWM에 대한 이해가 필요합니다.
<br>
<br>
원하는 파일을 불러와 작업을 진행한 후 저장합니다. `저장`을 누르면 가장 마지막으로 불러온 파일을 덮어씌워 저장하며, 별개의 파일로 저장하기 위해서는 `다른 이름으로 저장`을 사용해야 합니다.

## 실시간 재현
실시간으로 사운드를 재생하려면 `시뮬레이션` 탭을 클릭합니다. `VVVF음`은 생성된 PWM 파형을 오디오로 재생하며, `주행음`은 기차 소리를 오디오로 재생합니다.
<br>
<br>
`VVVF 시뮬레이션 설정`이나 `주행음 설정`에서 오디오 버퍼 크기를 조정하거나, 제어 변수, 전압 벡터, 전압 파형, FFT 등의 표시 여부 또는 실시간 편집 허용 여부를 설정할 수 있습니다. 이 기능들을 사용하기 위해서는 더 높은 처리 성능이 요구됩니다.

## VVVF 재현 방법
들어가기에 앞서, 설정값이 `-1`인 경우는 해당 기능이 비활성화됨을 의미합니다.<br>

### 레벨 설정
먼저 `기본` 탭에 있는 `PWM 레벨`을 클릭합니다.<br>
여기에서 어떤 PWM 레벨을 사용할 지 결정할 수 있습니다. 대부분의 VVVF는 2레벨을 사용합니다.<br>

### 최소 출력 주파수 설정
다음으로 `최소 출력 주파수`를 클릭합니다.<br>
여기에서 출력 주파수의 최솟값을 설정할 수 있습니다.<br>
출력 주파수가 최소 출력 주파수 이하인 경우 출력 주파수는 이 값으로 유지됩니다.<br>
0 이하의 값이면 이 설정은 무시됩니다.

### 타행(저크) 설정
그런 다음, `타행 설정`을 클릭합니다.<br>
여기에서 출력이 완전히 켜지거나 꺼지기가지의 시간이 얼마나 소요될지를 설정할 수 있습니다.<br>
`최대 전압 주파수`는 더 이상 전압이 높아지지 않는 주파수를 결정합니다.<br>
`주파수 변화율`은 PWM 패턴을 읽어들이는 출력 주파수가 초당 변화하는 값을 결정합니다.<br>
`타행 종료`는 출력을 켤 때, `타행 진입`은 출력을 끌 때 적용됩니다. 이 옵션은 역행과 제동에 각각 설정될 수 있습니다.<br>

### 역행 패턴 설정
#### 패턴 추가
이제 `역행` 탭을 클릭합니다.<br>
여기에서 역행 시의 패턴을 설정할 수 있습니다.<br>
`+`버튼을 클릭하여 패턴을 추가할 수 있습니다.<br>
마우스 우클릭을 통해 패턴을 복사 및 삭제(패턴에 우클릭 시), 또는 정렬(목록에 우클릭 시)할 수 있습니다.<br>

#### 패턴 조건 설정
패턴의 조건을 설정합니다.<br>
`패턴 조건 설정` 중 `시작 주파수`에 값을 입력하여 패턴이 어느 출력 주파수부터 시작할지 설정할 수 있습니다.<br>
만약 출력 주파수를 기준으로 조건을 설정하고 싶다면 `최소 주파수`와 `최대 주파수`에 값을 입력합니다.<br>
`패턴 유지`는 타행 진입 및 종료 시 해당 펄스 패턴이 유지될지를 설정하는 항목입니다. 만약 위의 주파수 조건을 만족하지 못하면 `패턴 유지`의 체크박스에 체크해도 해당 패턴이 나타나지 않습니다.<br>
`패턴 활성화`의 체크박스는 각각 `역행 및 제동 시`, `타행 종료 시`, `타행 진입 시`에 패턴이 사용될 지 여부를 결정합니다.<br>

#### 파형 설정
`펄스 모드` 중 `종류`의 드롭다운 메뉴에서 PWM 파형의 종류를 설정할 수 있습니다.<br>
| 종류 | 설명 |
| --- | --- |
|비동기|설정한 캐리어 주파수에 따라 신호파를 변조하는 모드|
|동기|신호파의 배수(펄스 수)인 캐리어 주파수로 신호파를 변조하는 모드|
|CHM|전류 고조파 최소 PWM|
|SHE|선택적 고조파 제거 PWM|
|HO|특수 캐리어 주파수로 신호파를 변조하는 모드|

사용 가능한 일반적인 설정은 다음과 같습니다.

| 설정 항목 | 적용 대상 | 설명 |
| --- | --- | --- |
|펄스 수|`동기`, `CHM`, `SHE`, `HO`|펄스 수를 입력합니다.|
| 위상 반전 | 일부 `비동기`, `동기` | 캐리어의 위상을 180°로 설정합니다.|
| 구형파 | 일부 `동기` | 파형을 구형파에 가까운 형태로 변조합니다.|
| 고조파 설정 | 일부 `비동기`,`동기` | 신호파에 중첩되는 파형을 설정합니다.<br>기본적으로 `SVM`이나 `THI` 등이 사용됩니다. |
| 종류 | - | 여러 가지 변조 유형이 존재하는 경우, 이 드롭다운 메뉴에서 사용할 유형을 선택할 수 있습니다. |
| 신호파 | 일부 `비동기`,`동기` | 일반적으로 `사인파`를 신호파로 사용하지만, 필요에 따라 `삼각파` 등으로 변경할 수 있습니다. |
| 이산 설정 | - | 변조할 때 시간축을 이산화하여 신호파에 단계적 변화를 줍니다. |

<br>

`비동기`를 사용하는 경우 캐리어 주파수를 직접 설정할 수 있습니다.<br>
3레벨의 경우 `다이폴라 설정`도 가능합니다.<br>
`캐리어 주파수`에서 주파수 변경 방법을 선택할 수 있습니다.<br>
`파라미터`에 캐리어 주파수를 입력합니다.

#### 진폭(변조율) 설정
`진폭 설정`에서 (캐리어의 진폭에 대한) 신호파의 진폭을 설정할 수 있습니다.<br>
대부분의 경우에는 `모드`에 `정비례`를 사용하지만, 필요에 따라 다른 함수를 사용할 수 있습니다.<br>
`정비례`의 경우, `시작 주파수`에 `시작 진폭`, `끝 주파수`에 `끝 진폭`의 값을 갖는 일차함수로 진폭이 설정됩니다.<br>
신호파의 진폭은 타행 종료와 타행 진입 시에도 따로 설정할 수 있으며, 각각 `타행 종료 시 진폭 설정`과 `타행 진입 시 진폭 설정`에서 설정할 수 있습니다.<br>

### 회생 패턴 설정
`회생` 탭에서 역행 패턴과 같은 방법으로 설정할 수 있습니다.<br>

## 권장사항
사용 방법을 읽더라도 이해가 어려울 수 있기 때문에, 아래에 링크된 샘플 VVVF 파일을 바탕으로 본 프로그램의 사용 방법을 익히는 것을 권장합니다.

# 지원
- [디스코드](https://discord.gg/SQr2tXJgVq)에 가입하세요! 여기에서 본 프로그램과 관련된 질문을 할 수 있습니다.
- [샘플 VVVF 파일](https://github.com/VvvfGeeks/YAML-Files)

# 관련 프로젝트
 - [Raspberry Pi Pico Drive](https://github.com/VvvfGeeks/RPi-Pico-Drive)
 - [Raspberry Pi Zero Vvvf](https://github.com/VvvfGeeks/RPi-Zero-VVVF)
 - [Raspberry Pi 3 Vvvf](https://github.com/VvvfGeeks/RPi-3-VVVF)
 - [유튜브](https://www.youtube.com/channel/UCdo7fDodYWO29-Q_0G1S59g)

# 기여자
## 초기 기여자
 - [Thunderfeng](https://github.com/Leifengfengfeng)
 - [Geek of the Week](https://github.com/geekotw)
## 언어 번역
 - 한국어
    - [turtle713](https://github.com/intel713)
 - 중국어
    - [02001](https://github.com/Jerethon)
    - [YAJ-54S12G-1](https://github.com/YJ-305-A2)
