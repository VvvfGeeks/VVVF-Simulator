# 언어
- [English](README.md)
- [日本語](README_JPN.md)
- [简体中文](README_CHS.md)
- 한국어 (현재 문서)

# 목차
  - [개요](#개요)
  - [이용 약관](#이용-약관)
  - [기능](#기능)
  - [설치](#설치)
  - [사용방법](#사용방법)
  - [지원](#지원)
  - [관련 프로젝트](#관련-프로젝트)
  - [기여자](#기여자)

# 개요
`VVVF-Simulator` 는 PC에서 VVVF 인버터 소리를 재현하는 소프트웨어 입니다.<br>
이 프로그램은 C# WPF를 사용합니다.<br>

# 이용 약관
누구든지 이 프로그램의 코드를 **자유롭게** 사용할 수 있습니다.<br>
이 프로그램과 관련된 **모든 것에 책임을 지지 않습니다**.<br>

다음을 지켜주세요:<br>
- 이 GitHub 페이지의 URL 게시<br>

다음을 지양해주세요:<br>
- 이 페이지의 언급 없이 수정된 코드 공개<br>

# 기능
## VVVF 오디오 생성
시뮬레이션된 VVVF 인버터 오디오를 `.wav` 확장자로 생성할 수 있습니다.<br>
샘플링 주파수는 192kHz입니다.<br>

## 파형 영상 생성
VVVF 인버터 파형 영상을 `.avi` 확장자로 생성할 수 있습니다.
![2022-02-14](https://user-images.githubusercontent.com/77259842/153803020-6615bcce-22a6-4839-b919-ea114dc12d03.png)

## 전압 벡터 영상 설정
VVVF 인버터 전압 벡터 영상을 `.avi` 확장자로 생성할 수 있습니다.

## 제어 상태 영상 설정
이 프로그램은 제어 상태 값의 영상을 `.avi` 확장자로 생성할 수 있습니다.<br>
![2022-06-11 (1)](https://user-images.githubusercontent.com/77259842/173188884-72a1290a-6d7b-4354-88e4-cecfa5d0d424.png)

## 실시간 오디오 시뮬레이션
실시간으로 VVVF 인버터 오디오를 재생하고 주행 상태를 제어할 수 있습니다.<br>

# 설치
`exe` 파일을 다운로드 받아 실행하거나 PC에서 소스코드를 직접 빌드할 수 있습니다.
## exe로 실행하기
[릴리즈](https://github.com/VvvfGeeks/VVVF-Simulator/releases)로 들어가서, `VVVF-SIM.zip`을 다운로드 받은 후 압축을 풀고 `VVVF-Simulator.exe`를 실행합니다.<br>

## Visual Studio로 소스코드 빌드하기
먼저, Visual Studio 인스톨러를 다운로드 받습니다. 인스톨러를 실행하여 `.NET 데스크톱 개발`을 선택 후 설치합니다. 설치가 완료되면 Visual Studio를 실행하여 `리포지토리 복제`를 클릭합니다. 다음으로 아래의 URL을 복사합니다.
<br>
https://github.com/VvvfGeeks/VVVF-Simulator
<br>
복사한 URL을 `리포지토리 위치`에 붙여넣고 `복제`를 클릭합니다. 이제 `솔루션 'VvvfSimulator'`를 클릭하고 초록색 삼각형 실행 버튼을 눌러 프로그램을 컴파일 하고 실행합니다. 그러면 빌드된 프로그램이 실행됩니다.
<br>

# 사용방법
(이 프로그램을 사용하기 위해서는 SPWM에 대한 이해가 어느정도 필요합니다.)
<br>
<br>
파일을 불러오거나 저장하려면 파일을 클릭하고 원하는 작업을 선택합니다.
<br>
<br>
실시간으로 사운드를 재생하려면 `시뮬레이션` 탭을 클릭합니다. `VVVF음`은 생성된 PWM 파형을 오디오로 재생하며, `주행음`은 기차 소리를 오디오로 재생합니다.
<br>
<br>
`VVVF 시뮬레이션 설정`이나 `주행음 설정`에서 오디오 버퍼 크기를 조정하거나, 제어 변수, 전압 벡터 육각형, 전압 파형, FFT 등의 표시 여부 또는 실시간 편집 허용 여부를 설정할 수 있습니다. 이 기능들을 사용하기 위해서는 더 높은 처리 성능이 요구됩니다.
<br>
<br>
이제 사운드를 만들어 보도록 하겠습니다:
<br>
<br>
먼저, `기본`을 클릭하고 `PWM 레벨`을 클릭합니다. 여기에서 어떤 PWM 레벨을 사용할 지 결정할 수 있습니다. 대부분의 기차는 2레벨을 사용합니다.
<br>
<br>
그 후, `최소 출력 주파수`를 클릭합니다. 여기에서 역행과 제동에서 허용되는 출력 주파수의 최솟값을 설정할 수 있습니다. 만약 출력 주파수가 여기에서 설정한 주파수보다 낮다면 출력 주파수는 0이 되기 전까지 설정된 주파수를 유지합니다. 단, 진폭(변조율)은 계속 변할 수 있습니다. 만약 최소 출력 주파수를 0으로 설정하고 싶다면 값을 0으로 변경하세요.
<br>
<br>
다음으로 `타행 설정`을 클릭합니다. 여기에서 출력이 완전히 켜지거나 꺼지기가지 시간이 얼마나 소요될지를 설정할 수 있습니다. `최대 주파수`는 출력이 켜지거나 꺼질 때 PWM 패턴을 몇 Hz까지 읽어들일지를 결정합니다. `주파수 변화율`은 출력 전압이 PWM 패턴을 읽어들이는 속도를 결정합니다. `타행 종료`는 출력을 켤 때, `타행 진입`은 출력을 끌 때 적용됩니다. 이 옵션은 역행과 제동에 각각 설정될 수 있습니다.
<br>
<br>
이제 `역행`을 클릭합니다. 여기에서 역행 시의 PWM 패턴을 설정할 수 있습니다. 아래의 `+`버튼을 클릭하여 PWM 패턴을 생성할 수 있습니다. PWM 패턴을 우클릭하여 복사하거나 삭제할 수 있습니다. 또는 PWM 패턴 목록의 여백을 우클릭하여 목록을 정렬할 수 있습니다.
<br>
<br>
`펄스 조건 설정` 중 `시작 주파수`를 클릭하여 출력 주파수가 몇 Hz에 도달했을 떄 해당 PWM 패턴에 진입할 것인지를 설정할 수 있습니다. 만약 첫번째 PWM 패턴이라면 `최소 출력 주파수`에서 설정한 값으로 설정하세요.
<br>
<br>
`펄스 모드` 중 `종류`의 드롭다운 메뉴에서 PWM 타입을 설정할 수 있습니다. `비동기`는 캐리어 주파수가 출력 주파수와 동기화되지 않음을 의미합니다. `동기`는 `비동기`와 반대로 캐리어 주파수가 출력 주파수와 동기화되었음을 의미합니다. `동기`에서 나타나는 `펄스 수`는 캐리어 주파수가 출력 주파수의 몇 배가 될지를 의미합니다. `CHM`은 전류 고조파 최소(Current Harmonic Minimum) PWM이며, `SHE`는 선택적 고조파 제거(Selective Harmonic Elimination) PWM 입니다. 또한 `HO`는 고효율 과변조 (High-efficiency Overmodulation)  PWM입니다. `위상 반전`을 클릭하여 캐리어 신호를 상하 반전할 수 있으며, `고조파 설정`을 통해 신호파에 고조파를 추가할 수 있습니다. 아래의 드롭다운 메뉴에서 신호파의 종류를 변경할 수 있습니다.
<br>
<br>
만약 `비동기`를 선택했다면 몇 가지 추가적인 설정이 가능합니다. 먼저, `다이폴라`를 통해 다이폴라 바이어스를 설정할 수 있습니다. 이는 3레벨에만 존재하며, 대부분의 기차는 사용하지 않으므로 -1로 설정되어 있습니다. `캐리어 주파수` 중 `파라미터`는 캐리어 주파수를 설정하는 곳입니다. `랜덤 변조` 중 `주기`와 `범위`는 캐리어의 랜덤 변조를 설정하는 메뉴입니다. 예를 들어, 700Hz 캐리어 주파수에 50Hz 범위의 랜덤 변조를 사용한다면 캐리어 주파수가 670Hz부터 725Hz까지의 범위에서 무작위로 변화합니다. `주기`는 캐리어 주파수가 무작위로 변화하는 속도를 결정하며, 단위는 '초'입니다.
<br>
<br>
이하의 옵션은 `활성화` 중 `역행 및 제동 시`, `타행 종료 시`, `타행 진입 시`에 체크했을 때 표시됩니다.
<br>
<br>
이제 `진폭 설정`을 보도록 하겠습니다. 대부분의 경우에는 `정비례`가 사용되지만 필요하다면 다른 옵션도 사용될 수 있습니다. 프로그램은 두 점을 잇는 그래프에 따라 진폭을 설정합니다. `시작 주파수`는 진폭이 적용되기 시작하는 주파수이며, 이때의 진폭을 `시작 진폭`에서 설정할 수 있습니다. 마찬가지로 `끝 주파수`는 진폭 적용이 끝나는 주파수이며, 이때의 진폭을 `끝 진폭`에서 설정할 수 있습니다. `최대 진폭`과 `최소 진폭`은 최대 진폭과 최소 진폭을 각각 설정하여 진폭의 범위를 제한할 수 있는 설정입니다.
<br>
<br>
`제동` 탭의 PWM 패턴에서도 같은 방식으로 설정을 적용할 수 있습니다.
<br>
<br>
샘플 VVVF 파일을 참고하면 VVVF 사운드를 만들고 이해하는 데 도움이 될 수 있습니다.
<br>
<br>

# 지원
- [디스코드](https://discord.gg/SQr2tXJgVq)에 가입하세요! 여기에서 VVVF Simulator와 관련한 질문을 할 수 있습니다.
- [샘플 VVVF 파일](https://github.com/VvvfGeeks/VVVF-Simulator/releases/download/v1.9.0.1/yaml_samples.zip)

# 관련 프로젝트
 - [Raspberry Pi Zero Vvvf](https://github.com/VvvfGeeks/RPi-Zero-VVVF)
 - [Raspberry Pi 3 Vvvf](https://github.com/VvvfGeeks/RPi-3-VVVF)
 - [유튜브](https://www.youtube.com/channel/UCdo7fDodYWO29-Q_0G1S59g)

# 기여자
## 초기 기여자
 - [Thunderfeng](https://github.com/Leifengfengfeng)
 - [Geek of the Week](https://github.com/geekotw)
## 언어 번역
 - turtle713 (한국어)
 - [02001](https://github.com/Jerethon) (중국어)
