# 语言
- [English](README.md)
- [日本語](README_JPN.md)
- 简体中文（当前语言）
- [한국어](README_KOR.md)

# 目录
  - [描述](#描述)
  - [使用条款](#使用条款)
  - [功能和特点](#功能和特点)
  - [下载和安装](#下载和安装)
  - [使用教程](#使用教程)
  - [支持](#支持)
  - [相关项目](#相关项目)
  - [项目贡献者](#项目贡献者)

# 描述
`VVVF-Simulator` 是用于在 PC 上模拟 VVVF 逆变器声音的应用程序。<br>
该应用程序基于WPF .NET库来构建，使用C#语言编写。<br>

# 使用条款
您可以自由使用本程序中的任何代码用于**非商业用途**。<br>
如果您使用该程序制作视频等内容时，请在简介等位置**标明此网页的URL**。<br>
我们对您使用此应用程序所做的任何操作**不承担任何责任**。

# 功能和特点
## VVVF 声音模拟
此应用程序可模拟 VVVF 声音。

## 电机声音模拟
您可以模拟牵引电机和齿轮箱发出的实际声音。<br>
目前，关于这项的开发工作正在进行中，因为它还不能很真实、准确的呈现。<br>

## 实时音频生成
您可以实时生成音频并进行控制。默认情况下，S 键用于加速，W 键用于减速。
![2024-11-04](https://github.com/user-attachments/assets/954d67ab-65c4-4298-9514-031b1221be6a)

## 实时波形输出
您可以通过USB串口传输波形数据。

## 文件导出
此应用程序可以导出包含以下内容的 `.wav` 音频文件、`.avi` 视频文件和 `.png` 图像文件。<br>

|内容|类型|示例|
|-|-|-|
|线电压/相电压|`.wav`<br>`.avi`|导出为 .avi 格式的线电压波形![2022-02-14](https://user-images.githubusercontent.com/77259842/153803020-6615bcce-22a6-4839-b919-ea114dc12d03.png)|
|VVVF音/列车走行音|`.wav`|
|磁链|`.avi`<br>`.png`|
|控制信息|`.avi`|导出“控制信息-样式 2”的视频![2022-06-11 (1)](https://user-images.githubusercontent.com/77259842/173188884-72a1290a-6d7b-4354-88e4-cecfa5d0d424.png)|
|频率分布|`.avi`<br>`.png`|

# 下载和安装
您可以在自己的电脑上编译该项目的源代码，也可以直接下载`.exe`文件。<br>
## 方法1：下载可执行文件
请前往[Releases](https://github.com/VvvfGeeks/VVVF-Simulator/releases)页面，下载`VVVF-SIM.zip`.<br>
解压zip文件后，找到`VvvfSimulator.exe`并点击运行。<br>

## 方法2：在 Visual Studio 上构建源代码
首先，下载 Visual Studio。然后运行安装程序，并确保在安装程序中选择了 `.NET 桌面开发` 。<br>
安装完成后，打开 Visual Studio，并在欢迎界面上点击 `克隆存储库(C)` 。现在复制 VVVF-Simulator 页面的URL：https://github.com/VvvfGeeks/VVVF-Simulator<br>
粘贴URL并选择好文件路径后，点击 `克隆(C)` 。随后在主界面上点击 `解决方案“VVVF-Simulator”` ，之后点击带有绿色三角形图标的按钮以编译并运行程序。现在您应该会看到有一个窗口打开。<br>

# 使用教程
## 一、基本操作
### 1. 加载和保存
要加载或保存文件，请点击 `文件` 选项卡并从中选择您想要执行的操作。请注意，如果您加载了一个文件并点击保存，程序将保存到您最后加载的文件中，除非您使用 `另存为` 功能。<br>

### 2. 实时模拟
要实时生成声音，请点击 `实时模拟` 选项卡。`VVVF` 是通过音频播放生成的PWM，而 `Train` 是模拟列车的走行音。<br>
通过点击 `VVVF 模拟设置` 和 `Train 模拟设置` 这两个选项的设置，您可以更改 `缓冲区大小` 、显示 `控制信息` 、显示 `磁链` 、`波形` 以及 `模拟时允许编辑` 或 `显示 FFT` 等。请注意，启用的选项越多，对 CPU 性能的要求就越高。<br>

## 二、创建调制方式
### 1. 设置 PWM 电平
首先，点击 `基本设置` 。然后点击 `电平` 。在这里，您可以选择用于 VVVF 模拟的 PWM 电平数量。请注意，大多数列车使用二电平逆变器。<br>

### 2. 设置最低频率
点击 `最低频率` ，在这里，您可以设置加速和制动时生成的最低频率。如果基波频率低于此值，则输出频率将保持在该值，只要基波频率大于零，但幅度仍然可以变化。如果您希望最低输出频率从零开始，请将该值更改为0。<br>

### 3. 设置通断电
点击 `通断电设置` 。这些设置改变输出完全开启和关闭所需的时间。`最大电压频率` 是输出开启或关闭时将达到的输出频率。`变化速率` 是每秒达到该值的周期数。`通电` 表示开启输出，`断电` 表示关闭输出。这可以设置用于加速和制动。<br>

### 4. 设置加速程序
#### 4.1 添加调制方式
点击 `加速程序` 。在这里，您将在此处创建调制方式。通过点击底部的“+”号按钮，您可以为其添加一个调制方式。您可以右键单击该调制方式，根据您的需要点击“复制”或“删除”。<br>

#### 4.2 设置调制方式
现在点击所设置的调制方式，在 `起始频率` 一栏中，这就是特定设置开始的输出频率。如果这是第一个设置的调制方式，请将其设置为您已设置的最低输出频率或零。<br>
如果您希望该设置在特定频率范围内有效，可以使用 `生效最低频率` 和 `生效最高频率` 。`生效最低频率` 是设置有输出时的起始频率，而 `生效最高频率` 是设置无输出的终止频率。<br>
`保持` 决定设置是否保持为 “加速到N档（断电）” 或 “N档到加速（通电）”。如果其中任何一个选项没有勾选，则当模式转换时，且基波频率足够低，下一个选项将处于激活状态。`生效` 决定设置是否有“正常状态”、“上电”或“断电”的输出。<br>

#### 4.3 调制类型设置
在 `脉冲模式` 下，顶部附近有一个下拉菜单，您可以在其中设置 PWM 的类型。可用的基本调制模式见下表：

|调制模式|描述|
|-|-|
|异步调制|用载波频率调制基波频率的模式|
|同步调制|以基波频率的倍数（脉冲数）调制基波频率的模式|

除了这些最基本的调制模式外，还有**基于同步调制的高级调制**模式。如下表：

|类型（英文缩写）|英文全称|中文译名|描述|
|-|-|-|-|
|CHM (CHMPWM)|Current Harmonic Minimum Pulse-Width Modulation|电流谐波最小脉冲宽度调制|电流谐波最小值同步 PWM 调制|
|SHE (SHEPWM)|Selective Harmonic Elimination Pulse-Width Modulation|特定谐波消除脉冲宽度调制|消除特定谐波的同步 PWM 调制|
|HO (HOP)|High-efficiency Over-modulation PWM|高效过调制脉冲宽度调制|用特殊载波调制基波频率的同步 PWM 调制|

除此之外，还有各种可用的常规设置。如下表：

|设置选项|范围|描述和说明|
|:-:|:-:|:-:|
|脉冲数|仅限**同步调制**和**基于同步调制的高级调制**|该选项可设定脉冲数量|
|反相|均适用于部分**异步调制**和**同步调制**|勾选该选项后可反转载波|
|方波|仅限部分**同步调制**|勾选该选项后，调制波将变为方波|
|谐波设置|均适用于部分**异步调制**和**同步调制**|该设置可设定叠加在基频上的波形<br>基本上使用 `SVM` 和 `THI`|
|调制波|均适用于部分**异步调制**和**同步调制**|每个相位参考的波形类型；<br>一般情况下，该选项的默认值为 `正弦波` ，当然您也可以设置为 `三角波` 等类型|
|离散设置|-|调制时将时间轴离散化，并提供阶跃变化的波形；<br>此设置更改用于生成调制参考波的步数|

在 `脉冲模式`  下选择 `异步调制` 后，可在 `异步调制载波频率设置` 下设置载波频率。<br>
若在 `基本设置` 中设置 `PWM 电平` 为三电平，可在 `极性` 下选择模式以及更改数值。<br>
在 `载波模式` 中，可选择频率变化方式，比如 `恒定频率` 、 `可变频率` 、 `振动` 和 `列表` 等。

#### 4.4 设置调制度
`调制度` 是您设置调制方式的调制度的地方。在大多数情况下，您会希望使用 `线性` 模式，但如有必要，还有其他模式选项可以选择。如果选择 `线性` 模式，程序将以类似于计算两点之间的线的方式计算调制度。<br><br>
`起始频率` 是设置调制度开始的输出频率，`起始调制度` 则是该输出频率的调制度。<br>
`终止频率` 是设置调制度结束的输出频率，`截止调制度` 则是该输出频率的调制度。<br>
`最大调制度` 是允许的最大调制度，`切断时调制度` 是调制度的下限。<br><br>
程序一般有默认的调制度范围限制，但您可以根据需要禁用它们。<br>
此信息也适用于 `通电时调制度` 和 `断电时调制度`。<br>

### 5.设置制动程序
在 `加速程序` 中的所有设置也能同样应用于 `制动程序` 。

## 补充
如果您在 `脉冲模式` 下选择 `异步调制`，则以下信息适用：<br>

在 `异步调制载波频率设置` 下的 `随机载波设置` 中，您将看到 `幅度(Hz)`，即载波频率可以与其默认设置不同的量。<br>
例如，设置 `载波频率` 参数栏的值为 500，并将该项的值设置为 50，这意味着在基于 500Hz 异步频率的情况下载波频率可以在 550Hz 到 450Hz 之间变化（±50Hz）。`间隔(秒)` 指定载波频率可以以秒为单位改变的频率。如果您想在一定的基波频率范围内让载波频率升高或降低，则将 `载波模式` 栏将 `恒定频率` 更改为 `可变频率` 。更改后，可以在 `载波频率` 一栏中看到 `变化类型` 下拉菜单，以及 `起始基波频率` 、 `截止基波频率` 、`起始值` 和 `截止值` 等参数栏。<br>
`变化类型` 可以设置载波频率的变化方式，比如线性、反比例、指数和正弦。其中反比例有 `曲线速率` 参数栏，而指数有 `指数` 参数栏。<br>
`起始基波频率` 和 `截止基波频率` 是标记设置的起始和结束的基波频率，`起始值` 和 `截止值` 是实际载波频率的两个端点。<br>

我强烈建议您查看示例文件，因为通过这些示例文件会让您更容易理解如何创建并设置自己的调制方式。

# 支持
- 您可以加入以下讨论组来询问有关VVVF-SIM的问题：
   - [Discord](https://discord.gg/SQr2tXJgVq) 服务器
   - QQ频道：[VVVF-SIM交流频道](https://pd.qq.com/s/dimdwulea)
   - QQ群：[861610259](https://qm.qq.com/q/IqTqqqNOEM)
- [示例文件](https://github.com/VvvfGeeks/VVVF-Simulator/releases/download/v1.9.1.0/yaml_samples.zip)

# 相关项目
 - [Raspberry Pi Pico Drive](https://github.com/VvvfGeeks/RPi-Pico-Drive)
 - [Raspberry Pi Zero Vvvf](https://github.com/VvvfGeeks/RPi-Zero-VVVF)
 - [Raspberry Pi 3 Vvvf](https://github.com/VvvfGeeks/RPi-3-VVVF)
 - [Youtube](https://www.youtube.com/channel/UCdo7fDodYWO29-Q_0G1S59g)

# 项目贡献者
## 早期贡献者
 - [Thunderfeng](https://github.com/Leifengfengfeng)
 - [Geek of the Week](https://github.com/geekotw)
## 语言翻译
 - 韩语
    - [turtle713](https://github.com/intel713)
 - 简体中文
    - [02001](https://github.com/Jerethon)
    - [YAJ-54S12G-1](https://github.com/YJ-305-A2)
