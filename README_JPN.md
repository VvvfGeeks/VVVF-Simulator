# 言語
- [English](README.md)
- 日本語 (表示中の言語)
- [简体中文](README_CHS.md)
- [한국어](README_KOR.md)

# 概要
  - [説明](#説明)
  - [利用規約](#利用規約)
  - [機能](#機能)
  - [実行方法](#実行方法)
  - [使い方](#使い方)
  - [サポート](#サポート)
  - [関連プロジェクト](#関連プロジェクト)
  - [貢献者](#貢献者)

# 説明
`VVVF Simulator`はPC上でVVVFインバータの音をシミュレートするソフトウェアです。<br>
このプログラムはC# WPFアプリケーション向けです。<br>

# 利用規約
このプログラムのコードは**非商用に限り、無償**で使用できます。<br>
このプログラムを用いて動画などを作成した場合は、**概要欄などにこのウェブページのURLを参照**できるように提示してください。<br>
なお、このソフトウェアに関連して、行ったことについて、**当方は責任を負いません**。<br>

# 機能
## VVVF音再現
このアプリケーションは、VVVF音を再現できます。<br>

## 列車音再現
このアプリケーションは、実車の電動機や歯車の音を再現できます。<br>
現在開発中のため、正確ではありません。<br>

## リアルタイム再現
リアルタイムで、VVVF音や列車音を再現できます。<br>
初期設定では、Sキーで加速、Wキーで減速です。<br>
![2024-11-04](https://github.com/user-attachments/assets/954d67ab-65c4-4298-9514-031b1221be6a)

## リアルタイム波形出力
USBシリアルポートに相電圧の波形データを出力できます。<br>

## ファイル書き出し
このアプリケーションは、音声ファイル`.wav`、動画ファイル`.avi`、または画像ファイル`.png`を書き出せます。<br>
内容は次の表に示す通りです。<br>

|内容|種類|例|
| --- | --- | --- |
|相/線間電圧|`.wav`<br>`.avi`|例 : 線間電圧の動画の生成![2022-02-14](https://user-images.githubusercontent.com/77259842/153803020-6615bcce-22a6-4839-b919-ea114dc12d03.png)|
|列車音再現|`.wav`||
|電圧ベクトル図|`.avi` <br> `.png`|
|制御状態|`.avi` |例：制御状態デザイン2の動画生成 ![2022-06-11 (1)](https://user-images.githubusercontent.com/77259842/173188884-72a1290a-6d7b-4354-88e4-cecfa5d0d424.png)|
|周波数分布図|`.avi` <br> `.png`|

# 実行方法
実行するには、２つの方法があります。<br>
一つの方法は、実行ファイル`.exe`をダウンロードし、実行する方法。<br>
もう一つの方法は、ソースコードをPC上でビルドし実行する方法。<br>
## 方法１：実行ファイル`.exe`
`.exe`を含んだ`VVVF-SIM.zip`を[Releases](https://github.com/VvvfGeeks/VVVF-Simulator/releases)からダウンロードします。<br>
ZIPファイルを展開し、`VVVF-Simulator.exe`を実行します。<br>

## 方法２：ソースコードのビルド
まず、`Visual Studio`をダウンロードします。その後、インストーラーを実行し、`.NET デスクトップ開発`を選択してからインストールします。<br>
インストール終了後、`Visual Studio`が開いたら、`リポジトリのクローン`を選択します。<br>
ウィンドウが開いたら、[このGitHubのURL](https://github.com/VvvfGeeks/VVVF-Simulator)をコピーし、ウィンドウに貼り付け、クローンボタンを押します。<br>
クローン完了後、`VVVF-Simulator`というソリューションをクリックします。その後、上部バーの緑の三角ボタンを押してビルド・実行を行います。<br>
ビルドが成功すると、ウィンドウが表示され、実行されたことがわかります。
<br>

# 使い方
## 基本
ファイルをロードまたは保存するには、ファイルをクリックし、そこから実行したいことを選択します。<br>
ファイルをロードして保存をクリックすると、名前を付けて保存を使用しない限り、最後にロードしたファイルに保存されます。<br>
## リアルタイム再現
リアルタイムで音を生成するには、`シミュレーション`タブをクリックします。<br>
`VVVF`では、線間電圧の波形がスピーカーから再生されます。<br>
`列車音`では、実車の音を再現した音が再生されます。<br>
各種設定では、オーディオバッファーサイズや、各種ウィンドウの表示設定などが設定できます。<br>
ただし、ウィンドウの表示を増やすにつれて、CPUの性能が高い必要がありますのでご注意ください。<br>
## 音の再現方法
### 電位レベル設定
`基本`タブをクリックしてください。次に、`電位レベル`をクリックしてください。<br>
ここでは、PWMの電位レベルを設定します。補足事項として、ほとんどのVVVFは2レベルです。<br>
### 最小周波数設定
次に、`最小周波数`をクリックしてください。<br>
ここでは、基本周波数の最低値を設定します。<br>
もし、基本周波数が最小周波数以下の場合、この値に維持されます。<br>
0以下の値の場合は、この設定が無視されます。<br>
### ジャーク設定
次に、`ジャーク設定`をクリックしてください。<br>
ここでは、出力を切る・入れる際に、どれだけの周波数変化で出力を制御するかをせっていします。<br>
`最大電圧周波数`には、それ以上電位が上がらない周波数を入力します。<br>
`周波数変化率`には、1秒あたりに周波数がどれほど変化するかの値を入力します。<br>
### 力行パターン作成
#### パターンの追加
次に、`力行`をクリックしてください。<br>
ここでは、力行時の波形のパターンを作成します。<br>
`+`ボタンをクリックして、パターンを追加します。<br>
右クリックすることで必要に応じてコピーや削除することができます。<br>
#### 条件設定
パターンの条件設定を行います。<br>
`開始周波数`には、そのパターンがどの周波数から始まるかを入力します。<br>
もし、**駆動**周波数に基づいて条件を設定したい場合は、`回転以上`もしくは`回転以下`に入力します。<br>
`維持`とは、通電時、遮断時にそのパルスパターンが維持されるかどうかを設定する項目です。もし、周波数条件を満たさない場合は、維持をチェックしていてもそのパターンは出現しません。<br>
`有効化`とは、そのパターンが`通常時`、`通電時`または、`遮断時`にパターンを出現されるかどうかの設定です。<br>
#### 波形設定
`パルスモード`の枠の中に、`種類`というのがあります。ここでは、波形の種類を選びます。<br>

| 種類 | 説明 |
| --- | --- |
|非同期|キャリア周波数によって基本波形を変調するモード|
|同期|基本周波数の倍数（パルス数）で基本波形を変調するモード|
|CHM|電流高調波最小の意味|
|SHE|選択的高調波除去の意味|
|HO|特殊なキャリア周波数で変調するモード|

利用可能な一般的な各種設定は次の通りです。

| 設定項目 | 制限 | 説明 |
| --- | --- | --- |
|パルス数|`同期`,`CHM`,`SHE`,`HO`|パルス数を入力します。|
| 位相をずらす | 一部の`非同期`,`同期` | この設定は、キャリア周波数の位相をずらします。|
| 矩形波 | 一部の`同期` | この設定は、波形を単純な矩形波に近い形で変調します。 |
| 高調波設定 | 一部の`非同期`,`同期` | この設定は、基本周波数に重畳する波形を設定します。<br>基本的には、`SVM`や`THI`が使用されます。 |
| 種類 | - | 変調にほかの種類がある場合は、ここで種類を選択できます。 |
| 基本波形 | 一部の`非同期`,`同期` | 標準では、`正弦波`を基本波形として用いていますが、`三角波`などに変更できます。 |
| 離散設定 | - | 変調する際の時間軸を離散化し、波形に段階的変化をもたせます。 |

<br>

`非同期`を用いる場合、搬送波周波数が設定できます。<br>
3レベルの場合は、ダイポーラ設定も設定できます。<br>
搬送波周波数設定では、`搬送波周波数`で、周波数の変化の方法を選択します。<br>
`各種値`で、それらの値を入力します。<br>

#### 変調率設定
変調率設定では、基本周波数の振幅を設定します。<br>
ほとんどの場合では、`比例`を用いますが、必要に応じてほかのモードを使用します。<br>
`比例`の場合、始点周波数の時に始点変調率、終点周波数の時に終点変調率の一次直線で変化します。<br>
また、この設定は、通電時、遮断時でも行います。<br>

### 回生パターン
力行パターンと同じように作成できます。

## 補足
説明を読んでもわかりにくいと思うので、サンプルファイルをもとにアプリケーションを利用することをお勧めします。

# サポート
- [Discord](https://discord.gg/SQr2tXJgVq)でVVVF Simulatorについて質問できます。
- [サンプルファイル](https://github.com/VvvfGeeks/YAML-Files)

# 関連プロジェクト
 - [Raspberry Pi Pico Drive](https://github.com/VvvfGeeks/RPi-Pico-Drive)
 - [Raspberry Pi Zero Vvvf](https://github.com/VvvfGeeks/RPi-Zero-VVVF)
 - [Raspberry Pi 3 Vvvf](https://github.com/VvvfGeeks/RPi-3-VVVF)
 - [Youtube](https://www.youtube.com/channel/UCdo7fDodYWO29-Q_0G1S59g)

# 貢献者
## ソフトウェア開発
 - [Thunderfeng](https://github.com/Leifengfengfeng)
 - [Geek of the Week](https://github.com/geekotw)
## 言語翻訳
 - 韓国語
    - [turtle713](https://github.com/intel713)
 - 簡体中文
    - [02001](https://github.com/Jerethon)
    - [YAJ-54S12G-1](https://github.com/YJ-305-A2)
